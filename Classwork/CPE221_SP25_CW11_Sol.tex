\documentclass[12pt, xcolor=dvipsnames,svgnames,x11names]{article}
\usepackage{xcolor}
%\usepackage{universityos}
\usepackage{xspace}
\usepackage{url}
\usepackage[colorlinks=true,bookmarks=false,linkcolor=black,urlcolor=blue,citecolor=black]{hyperref}
\usepackage{fancyhdr}
\usepackage[top=1in,bottom=1in,left=1in,right=1in]{geometry}
\usepackage{multicol}
\usepackage{pgfplots}
\usetikzlibrary{circuits.logic.US}
% \usepackage{tgschola}
\let\temp\rmdefault
\usepackage{mathpazo}
\let\rmdefault\temp

\definecolor{roseRed}{HTML}{e20047}
\definecolor{coolGray}{HTML}{474747} % Neutral gray to contrast roseRed
\definecolor{mocha}{HTML}{a47864}
\definecolor{sage}{HTML}{8a9a5b}
\definecolor{dustyblue}{HTML}{6e8ca0}
\definecolor{terracotta}{HTML}{c87f5b}
\definecolor{lavender}{HTML}{9d8bb0}
\definecolor{darkmocha}{HTML}{7a5a4b}
\definecolor{darksage}{HTML}{667244}
\definecolor{darkdustyblue}{HTML}{526878}
\definecolor{darkterracotta}{HTML}{9e6347}
\definecolor{darklavender}{HTML}{766688}
\definecolor{winery}{HTML}{7e212a}

\definecolor{lightmocha}{HTML}{c2a190}
\definecolor{lightmocha1}{HTML}{d1b09c}
\definecolor{lightmocha2}{HTML}{e2c4b0}
\definecolor{lightmocha3}{HTML}{f0d9c7}

\definecolor{androidBlue}{HTML}{8AB4F8}
\definecolor{androidBlueLight}{HTML}{E8F0FE}
\definecolor{androidGreen}{HTML}{81C995}
\definecolor{androidGreenLight}{HTML}{E6F4EA}

% Red variants - based on Android's "error" and warning colors
\definecolor{androidRed}{HTML}{F28B82}
\definecolor{androidRedLight}{HTML}{FADAD7}

% Yellow variants - based on Android's accent/warning colors
\definecolor{androidYellow}{HTML}{FDD663}
\definecolor{androidYellowLight}{HTML}{FEF7E0}

% Purple variants - based on Android's system UI accents
\definecolor{androidPurple}{HTML}{D7AEFB}
\definecolor{androidPurpleLight}{HTML}{F4EAFC}

% Orange variants - based on Android's notification colors
\definecolor{androidOrange}{HTML}{FCAD70}
\definecolor{androidOrangeLight}{HTML}{FEEADC}

% Teal variants - based on Android's Material You palette
\definecolor{androidTeal}{HTML}{78D9EC}
\definecolor{androidTealLight}{HTML}{E6F6F9}

% Gray variants - based on Android's neutral colors
\definecolor{androidGray}{HTML}{DADCE0}
\definecolor{androidGrayLight}{HTML}{F1F3F4}


\usepackage{biolinum} % included with the {Libertine} font package
\renewcommand{\familydefault}{\sfdefault}



\usepackage[many]{tcolorbox}
\usepackage{CJKutf8}

% Redefine \maketitle to include tcolorbox
\makeatletter
\renewcommand{\maketitle}{%
    \begin{center}
        \begin{tcolorbox}[
            enhanced,
            colback=white,
            colframe=red!70!black,
            arc=0mm,
            title={\textcolor{white}{\bfseries CPE 221 \@title}},
            coltitle=white,
            fonttitle=\bfseries\large,
            attach boxed title to top left={xshift=10pt, yshift=-\tcboxedtitleheight/2},
            boxed title style={
            sharp corners,
            colback=red!70!black,
            frame hidden,
            boxrule=0pt,
            left=10pt, right=10pt,
            top=3pt, bottom=3pt
            }
        ]
        \large
        \vspace{10pt}
        \noindent Student Name (as in Canvas): \underline{\hspace{8cm}} 
        
        \vspace{10pt}
        \noindent A Number: \underline{\hspace{12cm}}

        \vspace{10pt}
        \noindent Points: 20

            \end{tcolorbox}
    \end{center}
}
\makeatother

\setlength{\parindent}{0pt}
\setlength{\parskip}{4pt}%

\input{common}

\newcommand{\hw}{Classwork 11: Machine Code in ARM}
\newcommand{\duedate}{March 17, 2025}
\newcommand{\hwturnin}{cw11}

% Add showanswer toggle (set to "yes" for solutions, anything else for student version)
\usepackage{ifthen}
\newcommand{\showanswer}{yes}

\newenvironment{multiequation}[1][]{%
    \begin{equation}%
    \begin{aligned}%
        \ifx#1\@empty\else\label{#1}\fi%
}{%
    \end{aligned}%
\end{equation}% 
}
\pagestyle{fancy}

\lhead{\footnotesize{\coursenumber, \courseterm}, \footnotesize{The University of Alabama in Huntsville}}
\chead{}
\rhead{\footnotesize{\emph{\hw}}}
\lfoot{\footnotesize{\instructorname}}
\cfoot{\footnotesize{\thepage}}
\rfoot{\footnotesize{\textit{Last Revised:~\today}}}
\renewcommand{\headrulewidth}{0.1pt}
\renewcommand{\footrulewidth}{0.1pt}
\newcommand{\minipagewidth}{0.8\columnwidth}

\renewcommand{\thefootnote}{\fnsymbol{footnote}}


\renewcommand{\headrulewidth}{0.1pt}
\renewcommand{\footrulewidth}{0.1pt}

\renewcommand{\thefootnote}{\fnsymbol{footnote}}

\usepackage{mdframed} 


\begin{document}


\title{\textsc{\hw}}
\author{Instructor: \instructorname}
\date{Due: \duedate\\ 100 points}

\maketitle

\section{Identify Instruction Type \hfill (10 Points)}
Determine the instruction type (data-processing, memory, or branch) for the machine code: \texttt{0xE5923004}

\ifthenelse{\equal{\showanswer}{yes}}{
  % solution boxes appear here
% Show solution and explanation when showanswer=yes
\begin{tcolorbox}[
    enhanced,
    colback=androidBlueLight,
    colframe=androidBlue,
    arc=5pt,
    boxrule=1pt,
    title=\textbf{Solution},
    fonttitle=\bfseries,
    coltitle=black,
    top=10pt,
    bottom=8pt,
    left=8pt,
    right=8pt,
    attach boxed title to top left={xshift=10pt, yshift=-\tcboxedtitleheight/2},
    boxed title style={
    colback=androidBlue,    
        colframe=androidBlue,
        arc=3pt,
        boxrule=0pt,
        left=6pt, right=6pt,
        top=3pt, bottom=3pt
    }
    ]
    This is a memory instruction.
\end{tcolorbox}

\begin{tcolorbox}[
    enhanced,
    colback=androidGreenLight,
    colframe=androidGreen,
    arc=5pt,
    boxrule=1pt,
    title=\textbf{Explanation},
    fonttitle=\bfseries,
    coltitle=black,
    top=10pt,
    bottom=8pt,
    left=8pt,
    right=8pt,
    attach boxed title to top left={xshift=10pt, yshift=-\tcboxedtitleheight/2},
    boxed title style={
        colback=androidGreen,
        colframe=androidGreen,
        arc=3pt,
        boxrule=0pt,
        left=6pt, right=6pt,
        top=3pt, bottom=3pt
    }
        ]
        Looking at bits 27-26 (op code), we extract \texttt{01} which indicates a memory instruction where:
        \begin{itemize}
            \item op code 00 = data-processing instruction
            \item op code 01 = memory instruction
            \item op code 10 = branch instruction
        \end{itemize}
\end{tcolorbox}
}{
% Show answer box when showanswer is not "yes"
\begin{tcolorbox}[
    enhanced,
    colback=white,
    colframe=androidYellow,
    arc=5pt,
    boxrule=1pt,
    title=\textbf{Your Answer},
    fonttitle=\bfseries,
    coltitle=black,
    top=10pt,
    bottom=8pt,
    left=8pt,
    right=8pt,
    attach boxed title to top left={xshift=10pt, yshift=-\tcboxedtitleheight/2},
    boxed title style={
        colback=androidYellow,
        colframe=coolGray,
        arc=3pt,
        boxrule=0pt,
        left=6pt, right=6pt,
        top=3pt, bottom=3pt
    },
    height=5in,
    ]
    % Empty box for student answer
\end{tcolorbox}
}

\newpage

\section{Encode SUB Instruction \hfill (10 Points)}

Encode the assembly instruction \texttt{SUB R0, R1, \#15} into machine code.

\ifthenelse{\equal{\showanswer}{yes}}{
  % solution boxes appear here
% Show solution and explanation when showanswer=yes
\begin{tcolorbox}[
    enhanced,
    colback=androidBlueLight,
    colframe=androidBlue,
    arc=5pt,
    boxrule=1pt,
    title=\textbf{Solution},
    fonttitle=\bfseries,
    coltitle=black,
    top=10pt,
    bottom=8pt,
    left=8pt,
    right=8pt,
    attach boxed title to top left={xshift=10pt, yshift=-\tcboxedtitleheight/2},
    boxed title style={
    colback=androidBlue,    
        colframe=androidBlue,
        arc=3pt,
        boxrule=0pt,
        left=6pt, right=6pt,
        top=3pt, bottom=3pt
    }
    ]
    \texttt{0xE241000F}
\end{tcolorbox}

\begin{tcolorbox}[
    enhanced,
    colback=androidGreenLight,
    colframe=androidGreen,
    arc=5pt,
    boxrule=1pt,
    title=\textbf{Explanation},
    fonttitle=\bfseries,
    coltitle=black,
    top=10pt,
    bottom=8pt,
    left=8pt,
    right=8pt,
    attach boxed title to top left={xshift=10pt, yshift=-\tcboxedtitleheight/2},
    boxed title style={
        colback=androidGreen,
        colframe=androidGreen,
        arc=3pt,
        boxrule=0pt,
        left=6pt, right=6pt,
        top=3pt, bottom=3pt
    }
        ]
        \begin{itemize}
            \item Cond (31-28): \texttt{1110} (AL - Always execute)
            \item Op (27-26): \texttt{00} (data-processing)
            \item I bit (25): \texttt{1} (immediate operand)
            \item Funct (24-21): \texttt{0100} (SUB operation)
            \item S bit (20): \texttt{0} (don't set condition flags)
            \item Rn (19-16): \texttt{0001} (R1)
            \item Rd (15-12): \texttt{0000} (R0)
            \item Rotation (11-8): \texttt{0000} (no rotation)
            \item Immediate (7-0): \texttt{00001111} (15 decimal)
        \end{itemize}
\end{tcolorbox}
}{
% Show answer box when showanswer is not "yes"
\begin{tcolorbox}[
    enhanced,
    colback=white,
    colframe=androidYellow,
    arc=5pt,
    boxrule=1pt,
    title=\textbf{Your Answer},
    fonttitle=\bfseries,
    coltitle=black,
    top=10pt,
    bottom=8pt,
    left=8pt,
    right=8pt,
    attach boxed title to top left={xshift=10pt, yshift=-\tcboxedtitleheight/2},
    boxed title style={
        colback=androidYellow,
        colframe=coolGray,
        arc=3pt,
        boxrule=0pt,
        left=6pt, right=6pt,
        top=3pt, bottom=3pt
    },
    height=6in,
    ]
    % Empty box for student answer
\end{tcolorbox}
}


\end{document}